Ext.define("{{ name }}", {
    extend: "{{ extend }}",
    uses: [
        {%- for assoc in associations %}

        '{{ assoc.model }}'
        {%- if not loop.last %},{% endif %}

        {%- endfor %}

    ],
    fields: [
        {%-for field in fields %}

        {

            {%- for key,value in field %}
            {%- if value.skipEncode %}

                {{ key }}: {{ value.value|raw }}
            {%- else %}

                {{ key }}: {{ value|json_encode()|raw }}
            {%- endif %}
            {%- if not loop.last %},{% endif %}
            {% endfor %}

        }
        {%- if not loop.last %},{% endif %}

        {%- endfor %}

    ],
    validations: [
        {%-for validator in validators %}

        {

            {%- for key,value in validator %}
            {%- if value.skipEncode %}

            {{ key }}: {{ value.value|raw }}
            {%- else %}

            {{ key }}: {{ value|json_encode()|raw }}
            {%- endif %}
            {%- if not loop.last %},{% endif %}
            {%- endfor %}

        }
        {%- if not loop.last %},{% endif %}

        {%- endfor %}

    ],
    associations: [
        {%- for assoc in associations %}

        {
            {%- if assoc.type == "OneToMany" %}

            type: 'hasMany',
            model: '{{ assoc.model }}',
            name: '{{ assoc.name|lower }}',
            foreignKey: '{{ assoc.key }}'

            {%- elseif assoc.type == "ManyToMany" %}

                type: 'hasMany',
                model: '{{ assoc.model }}',
                name: '{{ assoc.name|lower }}'

            {%- elseif assoc.type == "ManyToOne" %}

            type: 'belongsTo',
            name: '{{ assoc.name }}',
            instanceName: '{{ assoc.name }}',
            model: '{{ assoc.model }}',
            getterName: 'get{{ assoc.name|ucfirst }}',
            setterName: 'set{{ assoc.name|ucfirst }}',
            foreignKey: '{{ assoc.key }}',
            associationKey: '{{ assoc.name }}'


            {%- elseif assoc.type == "OneToOne" %}

            type: 'hasOne',
            model: '{{ assoc.model }}',
            getterName: 'get{{ assoc.name|ucfirst }}',
            setterName: 'set{{ assoc.name|ucfirst }}'

            {%- endif %}

        }
        {%- if not loop.last %},{% endif %}

        {%- endfor %}

    ],
    {%- if proxy %}

    proxy: {{ proxy|json_encode(constant('JSON_UNESCAPED_SLASHES'))|raw }}

    {%- else %}

    proxy: {
        type: 'memory'
    }

    {%- endif %}

});
